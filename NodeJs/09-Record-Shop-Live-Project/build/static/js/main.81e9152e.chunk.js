(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{22:function(e,t,a){e.exports=a(32)},32:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(7),o=a(6),c=a(1);function u(){return l.a.createElement("div",null,l.a.createElement("h1",null,"This is Home Page"))}var i=a(9),s=a(10);function m(e){var t=Object(n.useContext)(f),a=t.setIsLogin,o=t.setUserData,c=t.setToken,u=Object(n.useState)({firstName:"",lastName:"",email:"",password:"",role:"User",city:"",street:""}),m=Object(r.a)(u,2),d=m[0],p=m[1],E=function(e){p(Object(s.a)(Object(s.a)({},d),{},Object(i.a)({},e.target.name,e.target.value)))};return l.a.createElement("div",null,l.a.createElement("h1",null,"Signup"),l.a.createElement("form",{onSubmit:function(t){t.preventDefault(),fetch("http://localhost:4000/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then((function(e){console.log(e.headers.get("x-auth"));var t=e.headers.get("x-auth");return c(t),localStorage.setItem("token",t),e.json()})).then((function(t){if(t.success){console.log(t.user),o(t.user),a(!0);var n={islogin:!0,user:t.user};localStorage.setItem("userdata",JSON.stringify(n)),e.history.push("/profile")}else console.log(t)})).catch((function(e){return console.log(e)}))}},l.a.createElement("label",null,"First Name :",l.a.createElement("input",{type:"text",name:"firstName",placeholder:"First Name",onChange:E})),l.a.createElement("br",null),l.a.createElement("label",null,"Last Name :",l.a.createElement("input",{type:"text",name:"lastName",required:!0,placeholder:"Last Name",onChange:E})),l.a.createElement("br",null),l.a.createElement("label",null,"Email :"," ",l.a.createElement("input",{type:"email",name:"email",required:!0,placeholder:"E-mail",onChange:E})),l.a.createElement("br",null),l.a.createElement("label",null,"Password :",l.a.createElement("input",{type:"password",name:"password",required:!0,placeholder:"Password",onChange:E})),l.a.createElement("br",null),l.a.createElement("label",null,"Role :"," ",l.a.createElement("select",{name:"role",id:"role",onChange:E,required:!0},l.a.createElement("option",{value:"User"},"User"),l.a.createElement("option",{value:"Admin"},"Admin"))),l.a.createElement("br",null),l.a.createElement("label",null,"Street :",l.a.createElement("input",{type:"text",name:"street",placeholder:"Street",onChange:E})),l.a.createElement("br",null),l.a.createElement("label",null,"City :",l.a.createElement("input",{type:"text",name:"city",placeholder:"City",onChange:E})),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"SignUp"})))}function d(e){var t=Object(n.useContext)(f),a=t.setIsLogin,o=t.setUserData,c=t.setToken,u=Object(n.useState)({email:"",password:""}),m=Object(r.a)(u,2),d=m[0],p=m[1],E=function(e){p(Object(s.a)(Object(s.a)({},d),{},Object(i.a)({},e.target.name,e.target.value)))};return l.a.createElement("div",null,l.a.createElement("h1",null,"Login"),l.a.createElement("form",{onSubmit:function(t){t.preventDefault(),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then((function(e){console.log(e.headers.get("x-auth"));var t=e.headers.get("x-auth");return c(t),localStorage.setItem("token",t),e.json()})).then((function(t){if(t.success){console.log(t.user),o(t.user),a(!0);var n={islogin:!0,user:t.user};localStorage.setItem("userdata",JSON.stringify(n)),e.history.push("/profile")}else console.log(t)})).catch((function(e){return console.log(e)}))}},l.a.createElement("label",null,"Email :"," ",l.a.createElement("input",{type:"email",name:"email",required:!0,placeholder:"E-mail",onChange:E})),l.a.createElement("br",null),l.a.createElement("label",null,"Password :",l.a.createElement("input",{type:"password",name:"password",required:!0,placeholder:"Password",onChange:E})),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"login"})))}function p(){var e=Object(n.useContext)(f).userData;return l.a.createElement("div",null,e?l.a.createElement("div",null,l.a.createElement("h1",null,"Welcome! , ",e.lastName),l.a.createElement("p",null,"Email: ",e.email)):l.a.createElement(c.a,{to:"/login"}))}function E(){return l.a.createElement("div",null,l.a.createElement("h1",null,"PageNot Found"))}var h=a(21);function g(e){var t=Object(n.useContext)(f),a=t.records,r=t.setRecords,o=t.token,c=t.userData,u=t.cart,i=t.setCart;Object(n.useEffect)((function(){fetch("/record/api/records",{method:"GET",headers:{"x-auth":o}}).then((function(e){return e.json()})).then((function(e){e.success?r(e.allRecords):console.log(e.message)})).catch((function(e){return console.log(e)}))}),[]);return l.a.createElement("div",null,l.a.createElement("h1",null,"This is Records Page"),l.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"}},a.map((function(e){return l.a.createElement("div",{key:e._id,style:{width:"300px",padding:"10px",textAlign:"center",boxShadow:"2px 5px 5px gray"}},l.a.createElement("h3",null,"Title: ",e.title),l.a.createElement("h4",null,"Artist: ",e.artist),l.a.createElement("p",null,"Year: ",e.year),l.a.createElement("p",null,"Price: ",e.price,"$"),"Admin"===c.role?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{onClick:function(){return t=e._id,void fetch("/api/records/".concat(t),{method:"DELETE",headers:{"x-auth":o}}).then((function(e){return e.json()})).then((function(e){if(e.success){var t=a.filter((function(t){return t._id!==e.recordDeleted._id}));r(t)}else console.log(e.message)}));var t}},"Delete Record")," ",l.a.createElement("button",null,"Edit Record")," "):l.a.createElement("button",{onClick:function(){return function(e){var t=[].concat(Object(h.a)(u),[e]);i(t)}(e)},disabled:u.includes(e)},u.includes(e)?"Added":"Add to Cart"," "))}))))}function b(){var e=Object(n.useContext)(f),t=e.cart,a=e.userData,r=e.token,o=e.setCart;return l.a.createElement("div",null,0===t.length?l.a.createElement("h2",null,"No Item inside the Cart"):l.a.createElement("div",null,l.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"}}," ",t.map((function(e){return l.a.createElement("div",{key:e._id,style:{width:"300px",padding:"10px",textAlign:"center",boxShadow:"2px 5px 5px gray"}},l.a.createElement("h3",null,"Title: ",e.title),l.a.createElement("h4",null,"Artist: ",e.artist),l.a.createElement("p",null,"Year: ",e.year),l.a.createElement("p",null,"Price: ",e.price,"$"))}))),l.a.createElement("button",{onClick:function(){console.log("placing order");var e={records:t.map((function(e){return e._id})),user:a._id};fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json","x-auth":r},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.success&&(o([]),window.alert("we received your order"))}))}},"Checkout")))}var f=Object(n.createContext)(null);var y=Object(c.g)((function(e){var t=Object(n.useState)(!1),a=Object(r.a)(t,2),i=a[0],s=a[1],h=Object(n.useState)(null),y=Object(r.a)(h,2),v=y[0],j=y[1],x=Object(n.useState)(null),O=Object(r.a)(x,2),C=O[0],S=O[1],w=Object(n.useState)([]),k=Object(r.a)(w,2),N=k[0],T=k[1],P=Object(n.useState)([]),D=Object(r.a)(P,2),I=D[0],A=D[1];return Object(n.useEffect)((function(){var t=JSON.parse(localStorage.getItem("userdata"));t&&(console.log(t),j(t.user),s(t.islogin),S(localStorage.getItem("token")),console.log(e),e.history.push("/profile"))}),[]),l.a.createElement(f.Provider,{value:{isLogin:i,setIsLogin:s,userData:v,setUserData:j,token:C,setToken:S,records:N,setRecords:T,cart:I,setCart:A}},l.a.createElement("div",{className:"App"},l.a.createElement("h1",null,"Record Shop"),l.a.createElement("ul",null,l.a.createElement(o.b,{to:"/"},l.a.createElement("li",null,"Home")," "),!i&&l.a.createElement(o.b,{to:"/signup"},l.a.createElement("li",null,"Signup")),!i&&l.a.createElement(o.b,{to:"/login"},l.a.createElement("li",null,"Login")," "),i&&l.a.createElement(o.b,{to:"/profile"},l.a.createElement("li",null,"Profile")," "),i&&l.a.createElement(o.b,{to:"/records"},l.a.createElement("li",null,"Records")," "),i&&l.a.createElement(o.b,{to:"/cart"},l.a.createElement("li",null,"Cart ",l.a.createElement("span",{style:{backgroundColor:"green",color:"white",padding:"2px 4px",borderRadius:"50%"}},I.length))," "),i&&l.a.createElement("span",{style:{color:"darkblue",textDecoration:"underline",cursor:"pointer"}},l.a.createElement("li",{onClick:function(){window.confirm("do you really want to logout")&&(localStorage.clear(),s(!1),e.history.push("/login"))}},"Logout")," ")),l.a.createElement(c.d,null,l.a.createElement(c.b,{exact:!0,path:"/",component:u}),l.a.createElement(c.b,{path:"/signup",component:m}),l.a.createElement(c.b,{path:"/login",component:d}),l.a.createElement(c.b,{path:"/profile",component:p}),l.a.createElement(c.b,{path:"/records",component:g}),l.a.createElement(c.b,{path:"/cart",component:b}),l.a.createElement(c.b,{component:E}))))})),v=a(20);a.n(v).a.render(l.a.createElement(o.a,null,l.a.createElement(y,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.81e9152e.chunk.js.map