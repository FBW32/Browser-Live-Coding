{"version":3,"sources":["components/Home.js","components/Signup.js","components/Login.js","components/Profile.js","components/NotFound.js","components/Records.js","components/Cart.js","App.js","index.js"],"names":["Home","Signup","props","useContext","MyContext","setIsLogin","setUserData","setToken","useState","firstName","lastName","email","password","role","city","street","user","setUser","grabValue","e","target","name","value","onSubmit","preventDefault","fetch","method","headers","body","JSON","stringify","then","res","console","log","get","headertoken","localStorage","setItem","json","response","success","obj","islogin","history","push","catch","err","type","placeholder","onChange","required","id","Login","Profile","userData","to","NotFound","Records","records","setRecords","token","cart","setCart","useEffect","result","allRecords","message","style","display","flexWrap","justifyContent","map","record","key","_id","width","padding","textAlign","boxShadow","title","artist","year","price","onClick","updatedRecords","filter","recordDeleted","item","copyCart","addToCart","disabled","includes","Cart","length","order","window","alert","createContext","withRouter","isLogin","localData","parse","getItem","Provider","className","backgroundColor","color","borderRadius","textDecoration","cursor","confirm","clear","exact","path","component","reactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.81e9152e.chunk.js","sourcesContent":["import React from 'react'\n\nexport default function Home() {\n    return (\n        <div>\n            <h1>This is Home Page</h1>\n        </div>\n    )\n}\n","import React, { useState,useContext } from \"react\";\nimport { MyContext } from \"../App\";\n\n\nexport default function Signup(props) {\n  const {setIsLogin ,setUserData, setToken} =useContext(MyContext)\n  /*  const [firstName,setFirstName]=useState(\"\")\n    const [lastName,setLastName]=useState(\"\")\n    const [email,setEmail]=useState(\"\")\n    const [role,setRole]=useState(\"\")\n    const [password,setPassword]=useState(\"\")\n    const [city,setCity]=useState(\"\")\n    const [street,setStreet]=useState(\"\") */\n  const [user, setUser] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    email: \"\",\n    password: \"\",\n    role: \"User\",\n    city: \"\",\n    street: \"\",\n  });\n\n  const submitForm = (e) => {\n    e.preventDefault();\n\n    /* AJAX */\n    fetch(\"http://localhost:4000/api/users\", {\n      method: \"POST\",\n      headers:{ \"Content-Type\" : \"application/json\" }, \n      body: JSON.stringify(user),\n    })\n      .then((res) => {\n        console.log(res.headers.get(\"x-auth\"))\n        let headertoken = res.headers.get(\"x-auth\")\n        setToken(headertoken)\n        localStorage.setItem(\"token\",headertoken)\n        return res.json()\n      })\n      .then((response) => {\n        if(response.success){\n          console.log(response.user)\n          //storing user into context\n          setUserData(response.user)\n          setIsLogin(true)\n          let obj={\n            islogin:true,\n            user:response.user\n          }\n  \n          localStorage.setItem(\"userdata\",JSON.stringify(obj))\n\n          props.history.push(\"/profile\")\n        }else{\n          console.log(response)\n        }\n      }).catch(err=>console.log(err))\n    /*     const formData = new FormData(e.target)\n\n    let user= {  address:{}  }\n\n   for(let pair of formData){\n      if(pair[0]===\"city\"|| pair[0]===\"street\"){\n           user.address[pair[0]]=pair[1]\n      }else{\n          user[pair[0]]=pair[1]\n      }\n      \n   } \n   console.log(user)\n */\n  }; //ending submitform\n\n  const grabValue = (e) => {\n    setUser({ ...user, [e.target.name]: e.target.value });\n  };\n\n  return (\n    <div>\n      <h1>Signup</h1>\n      <form onSubmit={submitForm}>\n        <label>\n          First Name :\n          <input\n            type=\"text\"\n            name=\"firstName\"\n            placeholder=\"First Name\"\n            onChange={grabValue}\n          />\n        </label>\n        <br />\n\n        <label>\n          Last Name :\n          <input\n            type=\"text\"\n            name=\"lastName\"\n            required\n            placeholder=\"Last Name\"\n            onChange={grabValue}\n          />\n        </label>\n        <br />\n\n        <label>\n          Email :{\" \"}\n          <input\n            type=\"email\"\n            name=\"email\"\n            required\n            placeholder=\"E-mail\"\n            onChange={grabValue}\n          />\n        </label>\n        <br />\n\n        <label>\n          Password :\n          <input\n            type=\"password\"\n            name=\"password\"\n            required\n            placeholder=\"Password\"\n            onChange={grabValue}\n          />\n        </label>\n        <br />\n\n        <label>\n          Role :{\" \"}\n          <select name=\"role\" id=\"role\" onChange={grabValue} required >\n            <option value=\"User\">User</option>\n            <option value=\"Admin\">Admin</option>\n          \n          </select>\n        </label>\n        <br />\n\n        <label>\n          Street :\n          <input\n            type=\"text\"\n            name=\"street\"\n            placeholder=\"Street\"\n            onChange={grabValue}\n          />\n        </label>\n        <br />\n        <label>\n          City :\n          <input\n            type=\"text\"\n            name=\"city\"\n            placeholder=\"City\"\n            onChange={grabValue}\n          />\n        </label>\n        <br />\n\n        <input type=\"submit\" value=\"SignUp\" />\n      </form>\n    </div>\n  );\n}\n","import React, { useState,useContext } from \"react\";\nimport { MyContext } from \"../App\";\n\nexport default function Login(props) {\n    const {setIsLogin ,setUserData, setToken} =useContext(MyContext)\n\n    const [user, setUser] = useState({\n      email: \"\",\n      password: \"\"\n    });\n  \n\n\n    const submitForm = (e) => {\n      e.preventDefault();\n  \n      /* AJAX */\n      fetch(\"/login\", {\n        method: \"POST\",\n        headers:{ \"Content-Type\" : \"application/json\" }, \n        body: JSON.stringify(user),\n      })\n        .then((res) => {\n          console.log(res.headers.get(\"x-auth\"))\n          let headertoken = res.headers.get(\"x-auth\")\n          setToken(headertoken)\n          localStorage.setItem(\"token\",headertoken)\n          return res.json()\n        })\n        .then((response) => {\n          if(response.success){\n            console.log(response.user)\n            //storing user into context\n            setUserData(response.user)\n            setIsLogin(true)\n            let obj={\n              islogin:true,\n              user:response.user\n            }\n    \n            localStorage.setItem(\"userdata\",JSON.stringify(obj))\n  \n            props.history.push(\"/profile\")\n          }else{\n            console.log(response)\n          }\n        }).catch(err=>console.log(err))\n      /*     const formData = new FormData(e.target)\n  \n      let user= {  address:{}  }\n  \n     for(let pair of formData){\n        if(pair[0]===\"city\"|| pair[0]===\"street\"){\n             user.address[pair[0]]=pair[1]\n        }else{\n            user[pair[0]]=pair[1]\n        }\n        \n     } \n     console.log(user)\n   */\n    }; //ending submitform\n  \n    const grabValue = (e) => {\n      setUser({ ...user, [e.target.name]: e.target.value });\n    };\n  \n    return (\n      <div>\n        <h1>Login</h1>\n        <form onSubmit={submitForm}>\n       \n          <label>\n            Email :{\" \"}\n            <input\n              type=\"email\"\n              name=\"email\"\n              required\n              placeholder=\"E-mail\"\n              onChange={grabValue}\n            />\n          </label>\n          <br />\n  \n          <label>\n            Password :\n            <input\n              type=\"password\"\n              name=\"password\"\n              required\n              placeholder=\"Password\"\n              onChange={grabValue}\n            />\n          </label>\n          <br />\n  \n          <input type=\"submit\" value=\"login\" />\n        </form>\n      </div>\n    );\n}\n","import React, { useContext } from \"react\";\nimport { MyContext } from \"../App\";\nimport { Redirect } from \"react-router-dom\";\n\n\nexport default function Profile() {\n\n  const { userData } = useContext(MyContext);\n  return (\n    <div>\n      {userData ? (\n        <div>\n          <h1>Welcome! , {userData.lastName}</h1>\n          <p>Email: {userData.email}</p>\n        </div>\n      ) : (\n        <Redirect to=\"/login\"/>\n      )}\n    </div>\n  );\n}\n","import React from 'react'\n\nexport default function NotFound() {\n    return (\n        <div>\n            <h1>PageNot Found</h1>\n        </div>\n    )\n}\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { MyContext } from \"../App\";\n\nexport default function Records(props) {\n  const { records, setRecords, token, userData, cart, setCart } = useContext(\n    MyContext\n  );\n\n\n  useEffect(() => {\n    fetch(\"/record/api/records\", {\n      method: \"GET\",\n      headers: { \"x-auth\": token },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        if (result.success) {\n          setRecords(result.allRecords);\n        } else {\n          console.log(result.message);\n        }\n      })\n      .catch((err) => console.log(err));\n  }, []); //component did mount (execute once)\n\n  const handleDelete = (id) => {\n    fetch(`/api/records/${id}`, {\n      method: \"DELETE\",\n      headers: {\n        \"x-auth\": token,\n      },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        if (result.success) {\n          let updatedRecords = records.filter(\n            (record) => record._id !== result.recordDeleted._id\n          );\n          setRecords(updatedRecords);\n        } else {\n          console.log(result.message);\n        }\n      });\n  };\n\n  const addToCart = (item) => {\n    let copyCart = [...cart, item];\n    /*  copyCart.push(item) */\n    setCart(copyCart);\n  };\n\n  return (\n    <div>\n      <h1>This is Records Page</h1>\n      <div\n        style={{ display: \"flex\", flexWrap: \"wrap\", justifyContent: \"center\" }}\n      >\n        {records.map((record) => {\n          return (\n            <div\n              key={record._id}\n              style={{\n                width: \"300px\",\n                padding: \"10px\",\n                textAlign: \"center\",\n                boxShadow: \"2px 5px 5px gray\",\n              }}\n            >\n              <h3>Title: {record.title}</h3>\n              <h4>Artist: {record.artist}</h4>\n              <p>Year: {record.year}</p>\n              <p>Price: {record.price}$</p>\n              {userData.role === \"Admin\" ? (\n                <>\n                  <button onClick={() => handleDelete(record._id)}>\n                    Delete Record\n                  </button>{\" \"}\n                  <button>Edit Record</button>{\" \"}\n                </>\n              ) : (\n                <button onClick={() => addToCart(record)} disabled={cart.includes(record)}>{cart.includes(record)?\"Added\":\"Add to Cart\" } </button>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\n","import React, { useContext } from \"react\";\nimport { MyContext } from \"../App\";\n\nexport default function Cart() {\n  const { cart, userData, token, setCart } = useContext(MyContext);\n\n  const placeOrder = () => {\n    console.log(\"placing order\");\n\n    let order = {\n      records: cart.map((record) => record._id),\n      user: userData._id,\n    };\n\n    fetch(\"/api/orders\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-auth\": token,\n      },\n      body: JSON.stringify(order),\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        if (result.success) {\n          setCart([]);\n          window.alert(\"we received your order\");\n        }\n      });\n  };\n\n  return (\n    <div>\n      {cart.length === 0 ? (\n        <h2>No Item inside the Cart</h2>\n      ) : (\n        <div>\n          <div\n            style={{\n              display: \"flex\",\n              flexWrap: \"wrap\",\n              justifyContent: \"center\",\n            }}\n          >\n            {\" \"}\n            {cart.map((record) => {\n              return (\n                <div\n                  key={record._id}\n                  style={{\n                    width: \"300px\",\n                    padding: \"10px\",\n                    textAlign: \"center\",\n                    boxShadow: \"2px 5px 5px gray\",\n                  }}\n                >\n                  <h3>Title: {record.title}</h3>\n                  <h4>Artist: {record.artist}</h4>\n                  <p>Year: {record.year}</p>\n                  <p>Price: {record.price}$</p>\n                </div>\n              );\n            })}\n          </div>\n          <button onClick={placeOrder}>Checkout</button>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { createContext, useState, useEffect } from \"react\";\nimport { Route, Link, Switch, withRouter } from \"react-router-dom\";\nimport Home from \"./components/Home\";\nimport Signup from \"./components/Signup\";\nimport Login from \"./components/Login\";\nimport Profile from \"./components/Profile\";\nimport NotFound from \"./components/NotFound\";\nimport Records from \"./components/Records\";\nimport Cart from \"./components/Cart\";\n\nexport const MyContext = createContext(null);\n\nfunction App(props) {\n  const [isLogin, setIsLogin] = useState(false);\n  const [userData, setUserData] = useState(null);\n  const [token, setToken] = useState(null);\n  const [records, setRecords] = useState([]);\n  const [cart,setCart]=useState([])\n\n  //onload we are reading,what data we have in localStorage\n  useEffect(() => {\n    const localData = JSON.parse(localStorage.getItem(\"userdata\")); //null or userdata\n    if (localData) {\n      console.log(localData);\n      setUserData(localData.user);\n      setIsLogin(localData.islogin);\n      setToken(localStorage.getItem(\"token\"));\n      console.log(props);\n      props.history.push(\"/profile\");\n    }\n  }, []);\n\n  const logout = () => {\n    let decision = window.confirm(\"do you really want to logout\");\n    if (decision) {\n      localStorage.clear();\n      /*   localStorage.removeItem(\"userdata\")\n       localStorage.removeItem(\"token\") */\n      setIsLogin(false);\n      props.history.push(\"/login\");\n    }\n  };\n\n  return (\n    <MyContext.Provider\n      value={{\n        isLogin,\n        setIsLogin,\n        userData,\n        setUserData,\n        token,\n        setToken,\n        records,\n        setRecords,\n        cart,\n        setCart\n      }}\n    >\n      <div className=\"App\">\n        <h1>Record Shop</h1>\n        <ul>\n          <Link to=\"/\">\n            <li>Home</li>{\" \"}\n          </Link>\n          {!isLogin && (\n            <Link to=\"/signup\">\n              <li>Signup</li>\n            </Link>\n          )}\n          {!isLogin && (\n            <Link to=\"/login\">\n              <li>Login</li>{\" \"}\n            </Link>\n          )}\n          {isLogin && (\n            <Link to=\"/profile\">\n              <li>Profile</li>{\" \"}\n            </Link>\n          )}\n          {isLogin && (\n            <Link to=\"/records\">\n              <li>Records</li>{\" \"}\n            </Link>\n          )}\n\n           {isLogin && (\n            <Link to=\"/cart\">\n              <li>Cart <span style={{backgroundColor:\"green\",color:\"white\",padding:\"2px 4px\",borderRadius:\"50%\"}}>{cart.length}</span></li>{\" \"}\n            </Link>\n          )}\n\n          {isLogin && (\n            <span style={{color:\"darkblue\",textDecoration:\"underline\",cursor:\"pointer\"}}>\n              <li onClick={logout}>Logout</li>{\" \"}\n            </span>\n          )}\n        </ul>\n\n        <Switch>\n          <Route exact path=\"/\" component={Home} />\n          <Route path=\"/signup\" component={Signup} />\n          <Route path=\"/login\" component={Login} />\n          <Route path=\"/profile\" component={Profile} />\n          <Route path=\"/records\" component={Records} />\n          <Route path=\"/cart\" component={Cart} />\n          <Route component={NotFound} />\n        </Switch>\n      </div>\n    </MyContext.Provider>\n  );\n}\n\nexport default withRouter(App);\n","import React from \"react\";\nimport App from \"./App.js\";\nimport reactDOM from \"react-dom\";\nimport { HashRouter } from \"react-router-dom\";\n\nreactDOM.render(\n  <HashRouter>\n    <App />\n  </HashRouter>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}